# Zmienne w szablonach notyfikacji Grafana

PoniÅ¼ej znajduje siÄ™ lista zmiennych dostÄ™pnych w szablonach notyfikacji Grafana, ktÃ³re mogÄ… byÄ‡ uÅ¼ywane do wstawiania rÃ³Å¼nych informacji zwiÄ…zanych z alertami.

## Zmienne dotyczÄ…ce alertÃ³w

- **`{{ .Labels.alertname }}`**  
  Zwraca nazwÄ™ alertu (np. `High CPU Usage`).

- **`{{ .Labels.severity }}`**  
  Zwraca wartoÅ›Ä‡ labela `severity`, ktÃ³ry zazwyczaj okreÅ›la waÅ¼noÅ›Ä‡ alertu (np. `critical`, `warning`).

- **`{{ .Labels.instance }}`**  
  Zwraca nazwÄ™ instancji, na ktÃ³rej wystÄ…piÅ‚ alert (np. adres IP lub nazwa hosta).

- **`{{ .Labels.job }}`**  
  Zwraca wartoÅ›Ä‡ labela `job`, ktÃ³ra okreÅ›la nazwÄ™ zadania lub procesu, ktÃ³ry monitoruje alert.

- **`{{ .Labels.team }}`**  
  Zwraca wartoÅ›Ä‡ labela `team`, ktÃ³ry moÅ¼e wskazywaÄ‡ zespÃ³Å‚ odpowiedzialny za dany system.

- **`{{ .Labels.environment }}`**  
  Zwraca wartoÅ›Ä‡ labela `environment`, np. `production`, `staging`, itp.

- **`{{ .Labels.region }}`**  
  Zwraca wartoÅ›Ä‡ labela `region`, ktÃ³ry moÅ¼e wskazywaÄ‡ geograficzny region, np. `us-west`, `eu-central`, itp.

- **`{{ .Labels.cluster }}`**  
  Zwraca wartoÅ›Ä‡ labela `cluster`, ktÃ³ry moÅ¼e wskazywaÄ‡ na nazwÄ™ klastra, np. `cluster-01`.

- **`{{ .Labels.app }}`**  
  Zwraca wartoÅ›Ä‡ labela `app`, ktÃ³ra moÅ¼e wskazywaÄ‡ na nazwÄ™ aplikacji, ktÃ³rej dotyczy alert.

- **`{{ .Labels.namespace }}`**  
  Zwraca wartoÅ›Ä‡ labela `namespace`, ktÃ³ry jest czÄ™sto uÅ¼ywany w kontekÅ›cie Kubernetes i wskazuje na nazwÄ™ przestrzeni nazw.

## Zmienne dotyczÄ…ce stanu alertu

- **`{{ .Alerts.Firing }}`**  
  Zwraca listÄ™ wszystkich alertÃ³w w stanie **FIRING**.

- **`{{ .Alerts.Resolved }}`**  
  Zwraca listÄ™ wszystkich alertÃ³w w stanie **RESOLVED**.

- **`{{ len .Alerts.Firing }}`**  
  Zwraca liczbÄ™ alertÃ³w w stanie **FIRING**.

- **`{{ len .Alerts.Resolved }}`**  
  Zwraca liczbÄ™ alertÃ³w w stanie **RESOLVED**.

## Zmienne dotyczÄ…ce wiadomoÅ›ci i generatora

- **`{{ .Annotations.message }}`**  
  Zwraca dodatkowÄ… wiadomoÅ›Ä‡ zdefiniowanÄ… w polu `message` w konfiguracji alertu. JeÅ›li brak, moÅ¼na ustawiÄ‡ tekst alternatywny.

- **`{{ .Annotations.runbook_url }}`**  
  Zwraca URL do runbooka (instrukcji rozwiÄ…zywania problemÃ³w), jeÅ›li zostaÅ‚ okreÅ›lony w konfiguracji alertu.

- **`{{ .GeneratorURL }}`**  
  Zwraca URL do strony, ktÃ³ra generuje alert (np. Prometheus lub inna aplikacja monitorujÄ…ca).

## Zmienne dotyczÄ…ce czasu

- **`{{ .CommonLabels.__name__ }}`**  
  Zwraca nazwÄ™ ÅºrÃ³dÅ‚a danych (np. Prometheus).

- **`{{ .StartsAt }}`**  
  Zwraca czas, w ktÃ³rym alert zostaÅ‚ wygenerowany lub w ktÃ³rym stan alertu zostaÅ‚ zmieniony na **FIRING**.

- **`{{ .EndsAt }}`**  
  Zwraca czas, w ktÃ³rym alert zostaÅ‚ rozwiÄ…zany lub zakoÅ„czony (dla alertÃ³w **RESOLVED**).

## Zmienne zwiÄ…zane z konfiguracjÄ…

- **`{{ .AlertGroupLabels }}`**  
  Zwraca etykiety grupy alertÃ³w. MoÅ¼e byÄ‡ uÅ¼yteczne w przypadku, gdy alerty sÄ… grupowane razem.

- **`{{ .GroupLabels }}`**  
  Zwraca etykiety grupy dla grupujÄ…cych siÄ™ alertÃ³w.

- **`{{ .AlertRules }}`**  
  Zwraca zasady, wedÅ‚ug ktÃ³rych alerty zostaÅ‚y wygenerowane.

- **`{{ .SilenceURL }}`**  
  Zwraca URL do strony, na ktÃ³rej moÅ¼na wyciszyÄ‡ dany alert.

- **`{{ .Annotations.description }}`**  
  Zwraca opis alertu, jeÅ›li zostaÅ‚ okreÅ›lony w konfiguracji.

## Zmienne dotyczÄ…ce identyfikacji i uÅ¼ytkownikÃ³w

- **`{{ .Receiver }}`**  
  Zwraca nazwÄ™ odbiorcy powiadomienia, ktÃ³ra moÅ¼e byÄ‡ przydatna, gdy alerty sÄ… wysyÅ‚ane do rÃ³Å¼nych systemÃ³w.

- **`{{ .Alerts.Labels }} `**  
  Zwraca wszystkie etykiety zwiÄ…zane z danym alertem, co pozwala na dynamiczne wyÅ›wietlanie wszystkich labeli.

## Zmienne dodatkowe

- **`{{ .AlertState }}`**  
  Zwraca stan alertu: **FIRING** lub **RESOLVED**.

- **`{{ .RunbookURL }}`**  
  Zwraca URL do strony z instrukcjami naprawy lub dokumentacjÄ….

## PrzykÅ‚adowe wykorzystanie zmiennych

```yaml
{{ define "alerts.message" -}}
{{ if .Alerts.Firing -}}
**ğŸš¨ Alerty w stanie FIRING:**
{{ len .Alerts.Firing }} alert(y):
{{ range .Alerts.Firing }}
- **Alert:** {{ .Labels.alertname }}
- **Status:** FIRING
- **Severity:** {{ if .Labels.severity }}{{ .Labels.severity }}{{ else }}Brak severity{{ end }}
- **Message:** {{ if .Annotations.message }}{{ .Annotations.message }}{{ else }}Brak wiadomoÅ›ci{{ end }}
- [Kliknij tutaj, aby zobaczyÄ‡ szczegÃ³Å‚y]({{ .GeneratorURL }})
{{ end }}
{{- end }}

{{ if .Alerts.Resolved -}}
**âœ… RozwiÄ…zane alerty:**
{{ len .Alerts.Resolved }} alert(y) w stanie **RESOLVED**:
{{ range .Alerts.Resolved }}
- **Alert:** {{ .Labels.alertname }}
- **Status:** RESOLVED
- **Severity:** {{ if .Labels.severity }}{{ .Labels.severity }}{{ else }}Brak severity{{ end }}
- **Message:** Zdarzenie na discordzie
- [Kliknij tutaj, aby zobaczyÄ‡ szczegÃ³Å‚y]({{ .GeneratorURL }})
{{ end }}
{{- end }}
{{- end }}
```

